server:
  shutdown: graceful

spring:
  lifecycle:
    timeout-per-shutdown-phase: 20s
  data:
    mongodb:
      # uri: mongodb://${MONGODB_HOST:localhost}:27017/openlineage
      host: ${MONGODB_HOST:localhost}
      port: ${MONGODB_PORT:27017}
      database: openlineage
      # username: ${MONGODB_USER:}
      # password: ${MONGODB_PASSWORD:}
      # authentication-database: admin
      # replica-set-name: ${MONGODB_REPLICA_SET:rs0}
      # Auto-index creation should be disabled in production for DocumentDB 4.0 to avoid timeouts
      auto-index-creation: true
      connection-pool:
        min-size: 5
        max-size: 50
        max-wait-time: 2000

management:
  endpoints:
    web:
      exposure:
        include: health,info,prometheus,metrics
  endpoint:
    health:
      show-details: always

openlineage:
  dataset:
    normalize-names: true   # Strip query params & Hive partition segments from dataset names
  governance:
    cache-ttl-ms: 60000
  retention:
    # TTL durations for automatic data expiration (applied via TTL indexes)
    events-ttl: 90d    # Raw lineage events
    runs-ttl: 180d     # Run state documents
    facets-ttl: 90d    # Input/output dataset facet documents
    # Jobs and datasets have no TTL â€” they are reference data
  bulk:
    max-size: 500      # Maximum events per bulk ingestion request
